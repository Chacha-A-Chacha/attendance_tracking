{% extends "enrollment_base.html" %}

{% block title %}Application Summary - Programming Course{% endblock %}

{% block content %}
<div class="space-y-12">
    <!-- Summary Header -->
    <div class="border-b border-gray-900/10 pb-6">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl/9 font-bold tracking-tight text-gray-900">Application Summary</h1>
                <p class="mt-2 text-base/7 text-gray-600">Complete details of your Programming Course application.</p>
            </div>
            <div class="flex items-center gap-x-3">
                <span class="inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10">
                    Application #{{ enrollment.application_number }}
                </span>
            </div>
        </div>
    </div>

    <!-- Personal Information -->
    <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base/7 font-semibold text-gray-900">Personal Information</h2>
        <p class="mt-1 text-sm/6 text-gray-600">Your personal details as provided during application.</p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Full Name</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.full_name }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Application Number</dt>
                <dd class="mt-2 text-base/7 font-mono text-blue-600">{{ enrollment.application_number }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Email Address</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.email }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Phone Number</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.phone }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Submission Date</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.submitted_at.strftime('%B %d, %Y at %I:%M %p') }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Application Status</dt>
                <dd class="mt-2 text-base/7">
                    <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium
                        {% if enrollment.enrollment_status == 'enrolled' %}bg-green-50 text-green-700 ring-1 ring-inset ring-green-700/10{% endif %}
                        {% if enrollment.enrollment_status == 'pending' %}bg-yellow-50 text-yellow-700 ring-1 ring-inset ring-yellow-700/10{% endif %}
                        {% if enrollment.enrollment_status == 'payment_pending' %}bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10{% endif %}
                        {% if enrollment.enrollment_status == 'payment_verified' %}bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10{% endif %}
                        {% if enrollment.enrollment_status == 'rejected' %}bg-red-50 text-red-700 ring-1 ring-inset ring-red-700/10{% endif %}
                        {% if enrollment.enrollment_status == 'cancelled' %}bg-gray-50 text-gray-700 ring-1 ring-inset ring-gray-700/10{% endif %}">
                        {{ enrollment.enrollment_status|title|replace('_', ' ') }}
                    </span>
                </dd>
            </div>
        </div>
    </div>

    <!-- Learning Resources -->
    <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base/7 font-semibold text-gray-900">Learning Resources</h2>
        <p class="mt-1 text-sm/6 text-gray-600">Your equipment and learning resource requirements.</p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Laptop Availability</dt>
                <dd class="mt-2 text-base/7 text-gray-900">
                    {% if enrollment.has_laptop %}
                        Has laptop
                    {% else %}
                        No laptop available
                    {% endif %}
                </dd>
            </div>

            {% if enrollment.has_laptop %}
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Laptop Details</dt>
                <dd class="mt-2 text-base/7 text-gray-900">
                    {% if enrollment.laptop_brand %}
                        {{ enrollment.laptop_brand }}{% if enrollment.laptop_model %} {{ enrollment.laptop_model }}{% endif %}
                    {% else %}
                        Not specified
                    {% endif %}
                </dd>
            </div>
            {% endif %}

            {% if not enrollment.has_laptop %}
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Laptop Rental</dt>
                <dd class="mt-2 text-base/7 text-gray-900">
                    {% if enrollment.needs_laptop_rental %}
                        Rental assistance requested
                    {% else %}
                        No rental assistance needed
                    {% endif %}
                </dd>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Payment Information -->
    <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base/7 font-semibold text-gray-900">Payment Information</h2>
        <p class="mt-1 text-sm/6 text-gray-600">Your payment details and verification status.</p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Receipt Number</dt>
                <dd class="mt-2 text-base/7 font-mono text-gray-900">{{ enrollment.receipt_number }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Payment Amount</dt>
                <dd class="mt-2 text-base/7 text-gray-900">${{ "%.2f"|format(enrollment.payment_amount) }}</dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Payment Status</dt>
                <dd class="mt-2 text-base/7">
                    <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium
                        {% if enrollment.payment_status == 'verified' %}bg-green-50 text-green-700 ring-1 ring-inset ring-green-700/10{% endif %}
                        {% if enrollment.payment_status == 'paid' %}bg-yellow-50 text-yellow-700 ring-1 ring-inset ring-yellow-700/10{% endif %}
                        {% if enrollment.payment_status == 'unpaid' %}bg-red-50 text-red-700 ring-1 ring-inset ring-red-700/10{% endif %}">
                        {{ enrollment.payment_status|title }}
                    </span>
                </dd>
            </div>

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Email Verification</dt>
                <dd class="mt-2 text-base/7">
                    <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium
                        {% if enrollment.email_verified %}bg-green-50 text-green-700 ring-1 ring-inset ring-green-700/10{% else %}bg-yellow-50 text-yellow-700 ring-1 ring-inset ring-yellow-700/10{% endif %}">
                        {% if enrollment.email_verified %}Verified{% else %}Pending{% endif %}
                    </span>
                </dd>
            </div>
        </div>
    </div>

    <!-- Emergency Contact -->
    {% if enrollment.emergency_contact %}
    <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base/7 font-semibold text-gray-900">Emergency Contact</h2>
        <p class="mt-1 text-sm/6 text-gray-600">Your emergency contact information.</p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Contact Name</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.emergency_contact }}</dd>
            </div>

            {% if enrollment.emergency_phone %}
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Contact Phone</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.emergency_phone }}</dd>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Additional Information -->
    <div class="border-b border-gray-900/10 pb-12">
        <h2 class="text-base/7 font-semibold text-gray-900">Additional Information</h2>
        <p class="mt-1 text-sm/6 text-gray-600">Additional details about your application.</p>

        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2">
            {% if enrollment.how_did_you_hear %}
            <div>
                <dt class="text-sm/6 font-medium text-gray-900">How did you hear about us?</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.how_did_you_hear|title|replace('_', ' ') }}</dd>
            </div>
            {% endif %}

            <div>
                <dt class="text-sm/6 font-medium text-gray-900">Previous Attendance</dt>
                <dd class="mt-2 text-base/7 text-gray-900">
                    {% if enrollment.previous_attendance %}Yes{% else %}No{% endif %}
                </dd>
            </div>

            {% if enrollment.special_requirements %}
            <div class="sm:col-span-2">
                <dt class="text-sm/6 font-medium text-gray-900">Special Requirements</dt>
                <dd class="mt-2 text-base/7 text-gray-900">{{ enrollment.special_requirements }}</dd>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Actions -->
    <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <a href="{{ url_for('enrollment.application_dashboard', enrollment_id=enrollment.id) }}"
           class="rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 text-center">
            Return to Dashboard
        </a>

        {% if enrollment.receipt_upload_path %}
        <a href="{{ url_for('enrollment.view_receipt', enrollment_id=enrollment.id) }}" target="_blank"
           class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 text-center">
            View Receipt
        </a>
        {% endif %}

        <a href="{{ url_for('enrollment.search_application') }}"
           class="text-sm/6 font-semibold text-gray-900 py-2 text-center">
            Search Another Application
        </a>
    </div>
</div>
{% endblock %}
